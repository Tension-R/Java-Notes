# 安全
## 1. 类加载器
- 每个Java程序至少拥有三个类加载器：
	- 引导类加载器：负责加载系统类（通常从jar文件中加载），虚拟机的一部分，通常用C语言实现，没有对应的Classloader。
	- 扩展类加载器：用于从jre/lib/ext目录加载“标准的扩展”。
	- 系统类加载器（应用类加载器）：用于加载应用类，他在有CLASSPATH环境变量或-classpath命令行选项设置的类路径中的目录或者是jar/zip文件里查找这些类。

### 1. 类加载器的层次结构
- 类加载器有一种父/子关系。除了引导类加载器外，每个类加载器都会有一个父类加载器。根据规定，类加载器会为它的父类加载器提供一个几乎，以便加载任何给定的类。并且只有在其父类加载器加载失败时，它才会加载该给定的类。
- 父子关系：bootstrap <—— extension <—— System <—— Plugin
- 每个线程都有一个对类加载器的引用，称为上下文类加载器。
- 新线程的上下文列加载器会被设置为创建线程的上下文类加载器。
- 也可以调用setContextClassLoader方法设置类加载器。
- 类是由它的全名和类加载器来确定的。

## 2. 字节码校验
- 类加载器将新加载的java平台类的字节码传递给虚拟机时，这些字节码首先要接受校验器的校验。
- 除了系统类外，所有的类都要校验。
- 校验器要执行的检查
	- 变量要在使用前初始化。
	- 方法调用与对象引用类型之间要匹配。
	- 访问私有数据和方法的规则没有被违反。
	- 对本地变量的访问都落在运行时堆栈内。
	- 运行时堆栈没有溢出。
- 如果任何一条没有通过，就不加载该类。

## 3. 安全管理器与访问权限
- 安全管理器是java平台的第二种安全机制，一旦某个类被加载，并通过检验器检查后，它就会启动。
- 安全管理器是一个负责控制具体操作是否允许执行的类。
- 安全管理器负责的检查操作：
	- 创建一个新的类加载器。
	- 退出虚拟机。
	- 使用反射访问另一个类的成员。
	- 访问本地文件。
	- 打开socket连接。
	- 启动打印作业。
	- 访问系统剪贴板。
	- 访问AWT事件队列。
	- 打开一个顶层窗口。
- 